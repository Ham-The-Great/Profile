<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬æ—…è¡ŒåŠ©æ‰‹</title>
    <style>
        :root {
            --color-background: #FCFCF9;
            --color-surface: #FFFFFE;
            --color-text: #13343B;
            --color-text-secondary: #626C71;
            --color-primary: #218D8D;
            --color-primary-hover: #1D7480;
            --color-border: rgba(94, 82, 64, 0.2);
            --color-card-border: rgba(94, 82, 64, 0.12);
            --color-secondary: rgba(94, 82, 64, 0.12);
            --color-red-500: #C0152F;
            --color-orange-500: #A84B2F;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --radius-base: 8px;
            --radius-lg: 12px;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-background: #1F2121;
                --color-surface: #262828;
                --color-text: #F5F5F5;
                --color-text-secondary: rgba(167, 169, 169, 0.7);
                --color-primary: #32B8C6;
                --color-primary-hover: #2DA6B2;
                --color-border: rgba(119, 124, 124, 0.3);
                --color-card-border: rgba(119, 124, 124, 0.2);
                --color-secondary: rgba(119, 124, 124, 0.15);
                --color-red-500: #FF5459;
                --color-orange-500: #E66161;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: var(--color-background);
            color: var(--color-text);
            padding: var(--space-16);
            line-height: 1.6;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: var(--space-24);
            text-align: center;
            color: var(--color-text);
        }

        h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: var(--space-12);
            color: var(--color-text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card {
            background: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-lg);
            padding: var(--space-20);
            margin-bottom: var(--space-16);
            box-shadow: var(--shadow-sm);
        }

        .time-display {
            text-align: center;
            font-size: 32px;
            font-weight: 600;
            color: var(--color-primary);
            margin: var(--space-12) 0;
            font-variant-numeric: tabular-nums;
        }

        .date-display {
            text-align: center;
            font-size: 16px;
            color: var(--color-text-secondary);
            margin-bottom: var(--space-16);
        }

        .weather-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: var(--space-12);
            margin-top: var(--space-12);
        }

        .weather-item {
            background: var(--color-secondary);
            border-radius: var(--radius-base);
            padding: var(--space-12);
            text-align: center;
        }

        .weather-city {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: var(--space-8);
        }

        .weather-temp {
            font-size: 24px;
            font-weight: 600;
            color: var(--color-primary);
        }

        .weather-desc {
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-top: 4px;
        }

        .converter-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-12);
        }

        .input-group {
            display: flex;
            gap: var(--space-8);
            align-items: center;
        }

        .input-group input {
            flex: 1;
            padding: var(--space-12);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: 16px;
            background: var(--color-surface);
            color: var(--color-text);
        }

        .input-group input:focus {
            outline: 2px solid var(--color-primary);
            border-color: var(--color-primary);
        }

        .input-group span {
            font-weight: 600;
            color: var(--color-text-secondary);
            min-width: 45px;
        }

        .phrase-list {
            list-style: none;
        }

        .phrase-item {
            padding: var(--space-12);
            margin-bottom: var(--space-8);
            background: var(--color-secondary);
            border-radius: var(--radius-base);
            cursor: pointer;
            transition: background 0.2s;
        }

        .phrase-item:hover {
            background: var(--color-border);
        }

        .phrase-jp {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .phrase-en {
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .phrase-zh {
            font-size: 13px;
            color: var(--color-text-secondary);
            margin-top: 2px;
        }

        .emergency-grid {
            display: grid;
            gap: var(--space-12);
        }

        .emergency-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-12);
            background: var(--color-secondary);
            border-radius: var(--radius-base);
        }

        .emergency-label {
            font-weight: 600;
        }

        .emergency-number {
            font-size: 20px;
            font-weight: 600;
            color: var(--color-red-500);
            font-variant-numeric: tabular-nums;
        }

        .emergency-number a {
            color: var(--color-red-500);
            text-decoration: none;
        }

        .tips-list {
            list-style: none;
        }

        .tip-item {
            padding: var(--space-12);
            margin-bottom: var(--space-8);
            background: var(--color-secondary);
            border-radius: var(--radius-base);
            font-size: 14px;
        }

        .tip-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-8) var(--space-16);
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-base);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
            margin-top: var(--space-8);
        }

        .btn:hover {
            background: var(--color-primary-hover);
        }

        .loading {
            text-align: center;
            color: var(--color-text-secondary);
            font-size: 14px;
            padding: var(--space-12);
        }

        .exchange-rate {
            font-size: 12px;
            color: var(--color-text-secondary);
            text-align: center;
            margin-top: var(--space-8);
        }

        .tabs {
            display: flex;
            gap: var(--space-8);
            margin-bottom: var(--space-16);
            flex-wrap: wrap;
        }

        .tab {
            padding: var(--space-8) var(--space-16);
            background: var(--color-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .tab.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ—…è¡ŒåŠ©æ‰‹</h1>

        <div class="card">
            <h2>ğŸ• æ—¥æœ¬ç•¶åœ°æ™‚é–“</h2>
            <div class="time-display" id="japanTime">è¼‰å…¥ä¸­...</div>
            <div class="date-display" id="japanDate">è¼‰å…¥ä¸­...</div>
        </div>

        <div class="card">
            <h2>ğŸŒ¤ï¸ ä¸»è¦åŸå¸‚å¤©æ°£</h2>
            <div class="weather-grid" id="weatherGrid">
                <div class="loading">æ­£åœ¨å–å¾—å¤©æ°£è³‡è¨Š...</div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ’± è²¨å¹£è½‰æ›å™¨</h2>
            <div class="converter-form">
                <div class="input-group">
                    <span>HKD</span>
                    <input type="number" id="hkdInput" placeholder="è¼¸å…¥æ¸¯å¹£é‡‘é¡" value="100">
                    <span>â†’</span>
                </div>
                <div class="input-group">
                    <span>JPY</span>
                    <input type="number" id="jpyInput" placeholder="è¼¸å…¥æ—¥åœ“é‡‘é¡" readonly>
                </div>
                <div class="exchange-rate" id="exchangeRate">åŒ¯ç‡æ›´æ–°ä¸­...</div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ’¬ å¸¸ç”¨æ—¥èªçŸ­èª</h2>
            <div class="tabs">
                <div class="tab active" onclick="switchPhraseTab('basic')">åŸºæœ¬ç”¨èª</div>
                <div class="tab" onclick="switchPhraseTab('restaurant')">é¤å»³</div>
                <div class="tab" onclick="switchPhraseTab('shopping')">è³¼ç‰©</div>
                <div class="tab" onclick="switchPhraseTab('direction')">å•è·¯</div>
            </div>

            <div id="basicPhrases" class="tab-content active">
                <ul class="phrase-list" id="basicList"></ul>
            </div>
            <div id="restaurantPhrases" class="tab-content">
                <ul class="phrase-list" id="restaurantList"></ul>
            </div>
            <div id="shoppingPhrases" class="tab-content">
                <ul class="phrase-list" id="shoppingList"></ul>
            </div>
            <div id="directionPhrases" class="tab-content">
                <ul class="phrase-list" id="directionList"></ul>
            </div>
        </div>

        <div class="card">
            <h2>ğŸš¨ ç·Šæ€¥è¯çµ¡è³‡è¨Š</h2>
            <div class="emergency-grid">
                <div class="emergency-item">
                    <span class="emergency-label">è­¦å¯Ÿ</span>
                    <span class="emergency-number"><a href="tel:110">110</a></span>
                </div>
                <div class="emergency-item">
                    <span class="emergency-label">ç«è­¦ / æ•‘è­·è»Š</span>
                    <span class="emergency-number"><a href="tel:119">119</a></span>
                </div>
                <div class="emergency-item">
                    <span class="emergency-label">24å°æ™‚æ—…å®¢ç†±ç·š (JNTO)</span>
                    <span class="emergency-number"><a href="tel:050-3816-2787">050-3816-2787</a></span>
                </div>
            </div>
            <div style="margin-top: 12px; font-size: 13px; color: var(--color-text-secondary);">
                <strong>æ—…å®¢ç†±ç·š</strong>æä¾›è‹±èªã€ä¸­æ–‡ã€éŸ“èªæ”¯æ´ï¼Œ24å°æ™‚å…¨å¹´ç„¡ä¼‘
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“± ä½¿ç”¨èªªæ˜</h2>
            <ul class="tips-list">
                <li class="tip-item">
                    <div class="tip-title">ğŸŒ ç¶²çµ¡åŠŸèƒ½</div>
                    åœ¨ Canvas å…§å¯èƒ½ç„¡æ³•é€£ç·šã€‚è«‹é»æ“Šå³ä¸Šè§’ã€Œåœ¨æ–°åˆ†é ä¸­æ‰“é–‹ã€ä»¥ä½¿ç”¨å®Œæ•´åŠŸèƒ½
                </li>
                <li class="tip-item">
                    <div class="tip-title">ğŸ“² æ·»åŠ åˆ°ä¸»ç•«é¢</div>
                    åœ¨ Safari ä¸­é»æ“Šåˆ†äº«æŒ‰éˆ• â†’ ã€ŒåŠ å…¥ä¸»ç•«é¢è¢å¹•ã€ï¼Œå³å¯åƒ App ä¸€æ¨£ä½¿ç”¨
                </li>
                <li class="tip-item">
                    <div class="tip-title">ğŸ”Š èªéŸ³åŠŸèƒ½</div>
                    é»æ“Šæ—¥èªçŸ­èªå¯è½å–ç™¼éŸ³ï¼ˆéœ€åœ¨æ–°åˆ†é ä¸­ä½¿ç”¨ï¼‰
                </li>
                <li class="tip-item">
                    <div class="tip-title">ğŸ“µ é›¢ç·šåŠŸèƒ½</div>
                    æ™‚é–“ã€çŸ­èªã€ç·Šæ€¥è™Ÿç¢¼ã€æ—…è¡Œæç¤ºå‡å¯é›¢ç·šä½¿ç”¨
                </li>
            </ul>
        </div>

        <div class="card">
            <h2>ğŸ’¡ æ—…è¡Œå¯¦ç”¨æç¤º</h2>
            <ul class="tips-list">
                <li class="tip-item">
                    <div class="tip-title">ğŸš‡ äº¤é€šå¡</div>
                    ä½¿ç”¨ SUICA æˆ– PASMO å¡å¯åœ¨æ—¥æœ¬å„åœ°ä¹˜æ­å…¬å…±äº¤é€šå·¥å…·åŠåœ¨ä¾¿åˆ©åº—è³¼ç‰©
                </li>
                <li class="tip-item">
                    <div class="tip-title">ğŸ“± å…è²» Wi-Fi</div>
                    ä¸»è¦è»Šç«™ã€ä¾¿åˆ©åº—ã€å’–å•¡åº—é€šå¸¸æä¾›å…è²» Wi-Fiï¼Œå¯ä¸‹è¼‰ã€ŒJapan Wi-Fiã€æ‡‰ç”¨ç¨‹å¼
                </li>
                <li class="tip-item">
                    <div class="tip-title">ğŸ’´ ç¾é‡‘ç‚ºä¸»</div>
                    é›–ç„¶ä¿¡ç”¨å¡æ—¥æ¼¸æ™®åŠï¼Œä½†è¨±å¤šå°åº—ä»åªæ¥å—ç¾é‡‘ï¼Œå»ºè­°éš¨èº«æ”œå¸¶ç¾é‡‘
                </li>
                <li class="tip-item">
                    <div class="tip-title">ğŸ—ºï¸ å°èˆªæ‡‰ç”¨</div>
                    Google Maps åŠ Japan Travel by Navitime åœ¨æ—¥æœ¬éå¸¸æº–ç¢ºï¼Œå»ºè­°é å…ˆä¸‹è¼‰
                </li>
                <li class="tip-item">
                    <div class="tip-title">ğŸ£ é¤å»³ç¦®å„€</div>
                    ç”¨é¤å¾Œåœ¨åº§ä½ä»˜æ¬¾ï¼Œç„¡éœ€çµ¦å°è²»ã€‚é€²å…¥é¤å»³å‰è¨˜å¾—è„«é‹ï¼ˆå¦‚æœ‰è¦æ±‚ï¼‰
                </li>
                <li class="tip-item">
                    <div class="tip-title">ğŸš„ æ–°å¹¹ç·šè¨‚ç¥¨</div>
                    å¯ä½¿ç”¨ SmartEX æ‡‰ç”¨ç¨‹å¼æå‰é è¨‚æ–°å¹¹ç·šè»Šç¥¨ï¼ŒæŒ JR Pass è€…éœ€åˆ°å”®ç¥¨è™•åŠƒä½
                </li>
            </ul>
        </div>
    </div>

    <script>
        const phrases = {
            basic: [
                { jp: 'ã“ã‚“ã«ã¡ã¯', en: 'Hello', zh: 'ä½ å¥½' },
                { jp: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™', en: 'Thank you', zh: 'è¬è¬' },
                { jp: 'ã™ã¿ã¾ã›ã‚“', en: 'Excuse me / Sorry', zh: 'ä¸å¥½æ„æ€ï¼å°ä¸èµ·' },
                { jp: 'ã¯ã„ / ã„ã„ãˆ', en: 'Yes / No', zh: 'æ˜¯ï¼ä¸æ˜¯' },
                { jp: 'ã‚ã‹ã‚Šã¾ã›ã‚“', en: "I don't understand", zh: 'æˆ‘ä¸æ˜ç™½' },
                { jp: 'è‹±èªã‚’è©±ã›ã¾ã™ã‹ï¼Ÿ', en: 'Do you speak English?', zh: 'ä½ æœƒèªªè‹±èªå—ï¼Ÿ' },
                { jp: 'ãƒˆã‚¤ãƒ¬ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', en: 'Where is the toilet?', zh: 'æ´—æ‰‹é–“åœ¨å“ªè£¡ï¼Ÿ' },
                { jp: 'ã„ãã‚‰ã§ã™ã‹ï¼Ÿ', en: 'How much is it?', zh: 'å¤šå°‘éŒ¢ï¼Ÿ' }
            ],
            restaurant: [
                { jp: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãã ã•ã„', en: 'Menu please', zh: 'è«‹çµ¦æˆ‘èœå–®' },
                { jp: 'ã“ã‚Œã‚’ãã ã•ã„', en: 'I want this', zh: 'æˆ‘è¦é€™å€‹' },
                { jp: 'ãŠä¼šè¨ˆãŠé¡˜ã„ã—ã¾ã™', en: 'Check please', zh: 'è«‹çµå¸³' },
                { jp: 'ãŠã„ã—ã„ã§ã™', en: 'Delicious', zh: 'å¥½åƒ' },
                { jp: 'æ°´ã‚’ãã ã•ã„', en: 'Water please', zh: 'è«‹çµ¦æˆ‘æ°´' },
                { jp: 'ãŠã™ã™ã‚ã¯ä½•ã§ã™ã‹ï¼Ÿ', en: 'What do you recommend?', zh: 'ä½ æ¨è–¦ä»€éº¼ï¼Ÿ' },
                { jp: 'ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', en: 'Do you have vegetarian menu?', zh: 'æœ‰ç´ é£Ÿèœå–®å—ï¼Ÿ' }
            ],
            shopping: [
                { jp: 'ã“ã‚Œã‚’è¦‹ã›ã¦ãã ã•ã„', en: 'Please show me this', zh: 'è«‹çµ¦æˆ‘çœ‹é€™å€‹' },
                { jp: 'è©¦ç€ã§ãã¾ã™ã‹ï¼Ÿ', en: 'Can I try it on?', zh: 'å¯ä»¥è©¦ç©¿å—ï¼Ÿ' },
                { jp: 'ä»–ã®ã‚µã‚¤ã‚ºã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', en: 'Do you have other sizes?', zh: 'æœ‰å…¶ä»–å°ºå¯¸å—ï¼Ÿ' },
                { jp: 'å…ç¨ã§ãã¾ã™ã‹ï¼Ÿ', en: 'Can I get tax-free?', zh: 'å¯ä»¥å…ç¨…å—ï¼Ÿ' },
                { jp: 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã¯ä½¿ãˆã¾ã™ã‹ï¼Ÿ', en: 'Can I use credit card?', zh: 'å¯ä»¥ç”¨ä¿¡ç”¨å¡å—ï¼Ÿ' },
                { jp: 'è¢‹ã‚’ãã ã•ã„', en: 'Bag please', zh: 'è«‹çµ¦æˆ‘è¢‹å­' },
                { jp: 'å®‰ãã—ã¦ãã ã•ã„', en: 'Please give me a discount', zh: 'è«‹ä¾¿å®œä¸€é»' }
            ],
            direction: [
                { jp: 'ã€œã¯ã©ã“ã§ã™ã‹ï¼Ÿ', en: 'Where is ~?', zh: 'ï½åœ¨å“ªè£¡ï¼Ÿ' },
                { jp: 'é§…ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', en: 'Where is the station?', zh: 'è»Šç«™åœ¨å“ªè£¡ï¼Ÿ' },
                { jp: 'ã¾ã£ã™ã', en: 'Straight', zh: 'ç›´èµ°' },
                { jp: 'å³ / å·¦', en: 'Right / Left', zh: 'å³é‚Šï¼å·¦é‚Š' },
                { jp: 'åœ°å›³ã‚’è¦‹ã›ã¦ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿ', en: 'Can you show me on the map?', zh: 'å¯ä»¥æŒ‡çµ¦æˆ‘çœ‹åœ°åœ–å—ï¼Ÿ' },
                { jp: 'ã“ã“ã«è¡ŒããŸã„ã§ã™', en: 'I want to go here', zh: 'æˆ‘æƒ³å»é€™è£¡' },
                { jp: 'è¿·ã„ã¾ã—ãŸ', en: 'I am lost', zh: 'æˆ‘è¿·è·¯äº†' }
            ]
        };

        function updateJapanTime() {
            const now = new Date();
            const japanTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Tokyo' }));
            
            const timeString = japanTime.toLocaleTimeString('zh-HK', { 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                hour12: false 
            });
            
            const dateString = japanTime.toLocaleDateString('zh-HK', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            });
            
            document.getElementById('japanTime').textContent = timeString;
            document.getElementById('japanDate').textContent = dateString;
        }

        async function fetchWeather() {
            const cities = [
                { name: 'æ±äº¬', lat: 35.6762, lon: 139.6503 },
                { name: 'å¤§é˜ª', lat: 34.6937, lon: 135.5023 },
                { name: 'äº¬éƒ½', lat: 35.0116, lon: 135.7681 },
                { name: 'ç¦å²¡', lat: 33.5904, lon: 130.4017 }
            ];

            const weatherGrid = document.getElementById('weatherGrid');
            weatherGrid.innerHTML = '';

            let hasError = false;

            for (const city of cities) {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 5000);
                    
                    const response = await fetch(
                        `https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current=temperature_2m,weather_code&timezone=Asia/Tokyo`,
                        { signal: controller.signal }
                    );
                    clearTimeout(timeoutId);
                    
                    const data = await response.json();
                    
                    const temp = Math.round(data.current.temperature_2m);
                    const weatherCode = data.current.weather_code;
                    const weatherDesc = getWeatherDescription(weatherCode);

                    const weatherItem = document.createElement('div');
                    weatherItem.className = 'weather-item';
                    weatherItem.innerHTML = `
                        <div class="weather-city">${city.name}</div>
                        <div class="weather-temp">${temp}Â°C</div>
                        <div class="weather-desc">${weatherDesc}</div>
                    `;
                    weatherGrid.appendChild(weatherItem);
                } catch (error) {
                    hasError = true;
                    console.error(`ç„¡æ³•å–å¾— ${city.name} å¤©æ°£:`, error);
                    const weatherItem = document.createElement('div');
                    weatherItem.className = 'weather-item';
                    weatherItem.innerHTML = `
                        <div class="weather-city">${city.name}</div>
                        <div class="weather-temp">--Â°C</div>
                        <div class="weather-desc">ç„¡æ³•é€£ç·š</div>
                    `;
                    weatherGrid.appendChild(weatherItem);
                }
            }

            if (hasError) {
                const notice = document.createElement('div');
                notice.style.cssText = 'grid-column: 1/-1; text-align: center; color: var(--color-orange-500); font-size: 12px; margin-top: 8px;';
                notice.textContent = 'ğŸ’¡ æç¤ºï¼šè«‹åœ¨ Safari æ–°åˆ†é ä¸­æ‰“é–‹ä»¥ç²å–å¤©æ°£è³‡è¨Š';
                weatherGrid.appendChild(notice);
            }
        }

        function getWeatherDescription(code) {
            const weatherCodes = {
                0: 'æ™´å¤©',
                1: 'å¤§è‡´æ™´æœ—',
                2: 'å±€éƒ¨å¤šé›²',
                3: 'å¤šé›²',
                45: 'æœ‰éœ§',
                48: 'éœ§å‡‡',
                51: 'å°é›¨',
                53: 'ä¸­é›¨',
                55: 'å¤§é›¨',
                61: 'å°é›¨',
                63: 'ä¸­é›¨',
                65: 'å¤§é›¨',
                71: 'å°é›ª',
                73: 'ä¸­é›ª',
                75: 'å¤§é›ª',
                77: 'é›ªç²’',
                80: 'é™£é›¨',
                81: 'ä¸­é™£é›¨',
                82: 'å¤§é™£é›¨',
                85: 'å°é™£é›ª',
                86: 'å¤§é™£é›ª',
                95: 'é›·æš´',
                96: 'é›·æš´å¸¶å†°é›¹',
                99: 'å¼·é›·æš´å¸¶å†°é›¹'
            };
            return weatherCodes[code] || 'æœªçŸ¥';
        }

        async function updateExchangeRate() {
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000);
                
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/HKD', {
                    signal: controller.signal
                });
                clearTimeout(timeoutId);
                
                const data = await response.json();
                const rate = data.rates.JPY;
                
                window.exchangeRate = rate;
                document.getElementById('exchangeRate').textContent = `åŒ¯ç‡: 1 HKD = ${rate.toFixed(2)} JPY (å³æ™‚)`;
                convertCurrency();
            } catch (error) {
                console.error('ç„¡æ³•å–å¾—åŒ¯ç‡:', error);
                window.exchangeRate = 18.5;
                document.getElementById('exchangeRate').textContent = `åŒ¯ç‡: 1 HKD â‰ˆ 18.5 JPY (åƒè€ƒå€¼ï¼Œè«‹åœ¨æ–°åˆ†é ä¸­æ‰“é–‹ä»¥ç²å–å³æ™‚åŒ¯ç‡)`;
                convertCurrency();
            }
        }

        function convertCurrency() {
            const hkdInput = document.getElementById('hkdInput');
            const jpyInput = document.getElementById('jpyInput');
            const hkd = parseFloat(hkdInput.value) || 0;
            const jpy = hkd * (window.exchangeRate || 18.5);
            jpyInput.value = Math.round(jpy);
        }

        function renderPhrases() {
            for (const [category, phraseList] of Object.entries(phrases)) {
                const listElement = document.getElementById(`${category}List`);
                listElement.innerHTML = '';
                
                phraseList.forEach(phrase => {
                    const li = document.createElement('li');
                    li.className = 'phrase-item';
                    li.innerHTML = `
                        <div class="phrase-jp">${phrase.jp}</div>
                        <div class="phrase-zh">${phrase.zh}</div>
                        <div class="phrase-en">${phrase.en}</div>
                    `;
                    li.onclick = () => {
                        if ('speechSynthesis' in window) {
                            const utterance = new SpeechSynthesisUtterance(phrase.jp);
                            utterance.lang = 'ja-JP';
                            speechSynthesis.speak(utterance);
                        }
                    };
                    listElement.appendChild(li);
                });
            }
        }

        function switchPhraseTab(category) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`${category}Phrases`).classList.add('active');
        }

        document.getElementById('hkdInput').addEventListener('input', convertCurrency);

        updateJapanTime();
        setInterval(updateJapanTime, 1000);
        
        fetchWeather();
        setInterval(fetchWeather, 1800000);
        
        updateExchangeRate();
        renderPhrases();
    </script>
</body>
</html>
